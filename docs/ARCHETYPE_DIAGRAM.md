# Archetype Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Current Time  â”‚
â”‚   14:30:45      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Get Hour      â”‚    â”‚   Archetype      â”‚
â”‚   hour = 14     â”‚    â”‚   Schedule[14]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   HourlyActivityâ”‚
â”‚   {             â”‚
â”‚     hour: 14,   â”‚
â”‚     level: 'moderate' â”‚
â”‚     type: 'walking'   â”‚
â”‚     probability: 0.6  â”‚
â”‚   }             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Probability     â”‚    â”‚ Random Check     â”‚
â”‚ Check           â”‚â”€â”€â”€â–¶â”‚ Math.random()    â”‚
â”‚ 0.6 > 0.3?      â”‚    â”‚ < 0.6? âœ“         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Calculate     â”‚    â”‚   Base Rate      â”‚
â”‚   Step Rate     â”‚    â”‚   walking: 120   â”‚
â”‚                 â”‚    â”‚   jogging: 180   â”‚
â”‚   120 Ã· 60 = 2  â”‚    â”‚   steps/min       â”‚
â”‚   steps/sec      â”‚    â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Activity Level  â”‚    â”‚   Multiplier      â”‚
â”‚ moderate        â”‚â”€â”€â”€â–¶â”‚   Ã— 0.6           â”‚
â”‚                 â”‚    â”‚   = 1.2 steps/sec â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Device State    â”‚    â”‚   State           â”‚
â”‚ ACTIVE          â”‚â”€â”€â”€â–¶â”‚   Multiplier      â”‚
â”‚                 â”‚    â”‚   Ã— 1.0           â”‚
â”‚   Final: 1.2    â”‚    â”‚   = 1.2 steps/sec â”‚
â”‚   steps/sec     â”‚    â”‚                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Accumulate    â”‚    â”‚   Fractional     â”‚
â”‚   Steps         â”‚    â”‚   Accumulation   â”‚
â”‚   +1.2 * Î”t     â”‚    â”‚   Keep < 1       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Check >= 1    â”‚    â”‚   Emit Event     â”‚
â”‚   accumulated   â”‚â”€â”€â”€â–¶â”‚   NEW_STEP       â”‚
â”‚   >= 1?         â”‚    â”‚   +step count     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Archetype Examples

### Office Worker (8,000 steps/day)
```
Hour 7 (Morning Commute):
â”œâ”€â”€ level: 'moderate' (0.6x)
â”œâ”€â”€ type: 'walking' (120 steps/min)
â”œâ”€â”€ probability: 0.8
â””â”€â”€ Result: ~1.2 steps/sec when active

Hour 10 (Desk Work):
â”œâ”€â”€ level: 'sedentary' (0.05x)
â”œâ”€â”€ type: 'walking' (120 steps/min)
â”œâ”€â”€ probability: 0.3
â””â”€â”€ Result: ~0.03 steps/sec (very few steps)
```

### Athlete (15,000 steps/day)
```
Hour 6 (Morning Run):
â”œâ”€â”€ level: 'vigorous' (0.9x)
â”œâ”€â”€ type: 'jogging' (180 steps/min)
â”œâ”€â”€ probability: 0.9
â””â”€â”€ Result: ~2.7 steps/sec when active

Hour 22 (Sleep):
â”œâ”€â”€ level: 'sleep' (0.0x)
â”œâ”€â”€ type: 'walking'
â”œâ”€â”€ probability: 0.0
â””â”€â”€ Result: 0 steps/sec (always)
```

## Key Points

1. **Time-Based**: Each hour has different activity patterns
2. **Probabilistic**: Random chance determines if steps occur
3. **Multiplicative**: Activity level Ã— State multiplier = final rate
4. **Fractional**: Accumulates over time for precision
5. **Realistic**: Patterns match real human behavior

This creates natural, lifelike step generation that varies by time of day, activity level, and device state! ğŸƒâ€â™‚ï¸
